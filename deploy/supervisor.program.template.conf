[program:delay.bebackpacker.com]
# 项目根目录（请替换为实际 REMOTE_DIR）
directory=__REMOTE_DIR__

# 使用 Next.js standalone 产物直接启动（无需 npm start）
# 请将 __NODE_BIN__ 替换为服务器上 node 的绝对路径，例如：/usr/bin/node 或 /usr/local/bin/node
command=/bin/bash -lc 'set -a && source .env && exec __NODE_BIN__ .next/standalone/server.js'

autostart=true
autorestart=true
stopasgroup=true
killasgroup=true

# 建议将日志写到项目目录，避免 /var/log 权限问题
stderr_logfile=__REMOTE_DIR__/logs/app.err.log
stdout_logfile=__REMOTE_DIR__/logs/app.out.log

# 生产环境变量（包含端口）。若 .env 中已有 PORT，可将此处的 PORT 移除或保持一致
environment=NODE_ENV="production",PORT="__PORT__"

# 运行用户（按需调整）
user=deployer
