# 需求文档 - i love delay

## 产品概述

i love delay 是一个反向任务管理应用，与传统任务管理不同，它鼓励用户拖延任务，并要求为每个拖延的任务提供借口。

## 核心功能需求

### 任务状态管理

任务有三种状态：
- **todo**：刚创建的任务，默认为此状态
- **completed**：用户当天手动标记完成的任务
- **delayed**：用户当天未操作或手动标记为拖延的任务

### 状态转换规则

1. **创建任务**：只能创建当天任务，初始状态为 `todo`
2. **自动转换**：当天未手动操作的任务，第二天自动变为 `delayed`
3. **手动操作**：用户可手动将任务标记为 `completed` 或 `delayed`

### 页面结构

#### 1. 任务页（首页）
- **功能**：创建新任务，显示所有 `todo` 状态任务
- **创建任务**：
  - 只能创建当天任务
  - 自动显示历史任务列表，支持快速复选
  - 输入框支持新建或选择历史任务
- **任务列表**：仅显示 `todo` 状态任务

#### 2. 拖延页
- **功能**：管理所有 `delayed` 状态任务
- **任务展示**：
  - 显示任务名称和拖延时间
  - 提供借口输入/编辑功能
  - 记录每次借口的创建时间
- **统计信息**：
  - 任务拖延次数排行榜
  - 连续拖延天数统计
  - 借口字数统计
  - 拖延任务类型分析
  - 可视化图表展示

#### 3. 暴走页
- **功能**：突击完成拖延任务
- **任务选择**：
  - 从所有 `delayed` 和 `todo` 任务中选择
  - 多选模式，支持批量选择
- **任务执行**：
  - 生成当天突击任务清单
  - 每个任务只有"完成"选项
  - 未完成任务的第二天自动变为 `delayed`

### 用户体验需求

#### 视觉设计
- **风格**：简洁、清爽、现代
- **目标用户**：年轻用户群体，不喜欢循规蹈矩
- **布局**：模仿手机APP，全屏显示
- **导航**：底部固定3个tab bar

#### 交互设计
- **动画**：流畅的页面切换动画
- **反馈**：操作后有明确的视觉反馈
- **手势**：支持滑动操作（左滑删除、右滑完成）

### 技术需求

#### 离线使用
- **数据存储**：浏览器本地存储（IndexedDB）
- **离线可用**：断网时正常使用所有功能
- **数据同步**：后续支持云端同步

#### 微信登录
- **集成方式**：通过uniapp webview实现
- **流程**：
  1. 点击微信登录按钮
  2. 跳转到微信授权页面
  3. 授权后自动返回应用
  4. 获取用户信息并存储

### 非功能性需求

#### 性能要求
- **加载速度**：首屏加载时间 < 2秒
- **响应时间**：用户操作响应 < 100ms
- **内存占用**：运行时内存占用 < 50MB

#### 兼容性
- **浏览器**：支持Chrome 80+, Safari 12+, Firefox 75+
- **设备**：支持iOS 12+, Android 8+
- **屏幕**：适配320px - 768px宽度

#### 可扩展性
- **模块化**：功能模块化，便于后续扩展
- **主题系统**：支持多套主题切换
- **国际化**：预留多语言支持接口

## 用户故事

### 核心用户场景

1. **日常拖延**
   - 作为拖延症患者，我想创建任务但故意不完成，以获得应用的"奖励"
   - 我想为拖延的任务写有趣的借口，记录我的拖延历程

2. **统计分析**
   - 我想看到自己最常拖延哪些任务
   - 我想了解自己的拖延模式和时间分布

3. **突击完成**
   - 当我有动力时，我想选择多个拖延任务一次性完成
   - 我想体验"暴走模式"的成就感

4. **社交分享**
   - 我想分享自己的拖延统计到社交媒体
   - 我想看到朋友的拖延排行榜（后续功能）

## 数据需求

### 任务数据结构
```typescript
interface Task {
  id: string
  name: string
  status: 'todo' | 'completed' | 'delayed'
  createdAt: Date
  updatedAt: Date
  delayCount: number
  excuses: Excuse[]
}

interface Excuse {
  id: string
  content: string
  createdAt: Date
  taskId: string
}
```

### 统计数据需求
- 任务总数、完成数、拖延数
- 每日/每周/每月拖延趋势
- 热门拖延任务排行
- 借口字数和内容分析
- 用户活跃度统计